<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mula</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üê¥</text></svg>">
    <style>
        html, body {
            height: 100%;
        }
        body {
            display: flex;
            align-items: center;
            background-color: green;
            margin: 0;
        }
        #mula-canvas {
            margin: auto;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="mula-canvas" width="800" height="600"></canvas>

    <script>
        let mulaX = 150;
        const canvas = document.getElementById("mula-canvas");
        const ctx = canvas.getContext("2d");

        // TODO hacer un loop que tenga las siguientes funciones principales
        // Ver inputs
        // Pensar l√≥gica
        // Dibujar

        function draw() {
            ctx.restore();
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // const p = new Path2D('m 32.423215,101.64019 17.226952,-34.041938 40.65784,-0.107456 14.574913,33.595634 5.69533,-33.778278 9.57132,-29.303957 17.40239,18.23567 8.70119,-1.966633 L 119.79987,14.366847 103.67653,41.180492 43.336938,37.059475 19.922809,60.216901 41.754898,49.8471 Z');
            // ctx.stroke(p);


            // Elipse (c√≠rculo) del punto que intersecciona con la elipse de la mula
            {
		    ctx.beginPath();
		    const x = 600;
		    const y = 450;
		    const a = 2;
		    const b = 2;
		    ctx.ellipse(x, y, a, b, 0, 0, 2 * Math.PI);
		    ctx.fillStyle = 'rgb(200, 0, 0)';
		    ctx.fill();
            }

            // Elipse de la mula
            {
		    ctx.beginPath();
                    mulaX += 5;  // Se permitir√≠an las velocidades de 1 hasta 5.
		    const x = mulaX;
		    const y = 500;
		    const a = 120;
		    const b = 60;
		    ctx.ellipse(x, y, a, b, 0, 0, 2 * Math.PI);
		    ctx.stroke();

                    const distanceToEllipse = (x-600)*(x-600)/(a*a) + (y-450)*(y-450)/(b*b);
                    console.log(distanceToEllipse);
                    if (distanceToEllipse <= 1) {
                        alert("La mula ha tocado el punto...");
                        return;
                    }
            }
            window.requestAnimationFrame(draw);
        }
        function init() {
            window.requestAnimationFrame(draw);
        }
        init();
    </script>
</body>
</html>
